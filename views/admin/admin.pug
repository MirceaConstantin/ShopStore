include ../layouts/layout.pug

block admin
  mixin inputs(action)
    form(action="/admin" method="POST")
      input(type="hidden" name='action' value= action)
      div(class="input-group mb-2")
        input(id="newProdTitle" type="text" class="form-control addNewProd" name="title" placeholder="Add title of product" aria-label="Add title of product" aria-describedby="button-addon2")
      div( class="input-group mb-2")
        input(id="newProdPoster" type="url" class="form-control addNewProd" name="imagePoster" placeholder="Add the poster" aria-label="Add the poster" aria-describedby="button-addon2")
      div( class="input-group mb-2")
        input(id="newProdSlider" type="text" class="form-control addNewProd" name="imagesSlider" placeholder="Add image for slider" aria-label="Add images for slider" aria-describedby="button-addon2")
      div( class="input-group mb-2")
        input(id="newProdTrailer" type="url" class="form-control addNewProd" name="trailerGame" placeholder="Add trailer" aria-label="Add trailer" aria-describedby="button-addon2")
      div( class="input-group mb-2")
        input(id="newProdDescription" type="text" class="form-control addNewProd" name="description" placeholder="Add description" aria-label="Add description" aria-describedby="button-addon2")
      div( class="input-group mb-2")
        input(id="newProdPrice" type="number" class="form-control addNewProd" name="price" placeholder="Add price" aria-label="Add price" aria-describedby="button-addon2")
      div( class="input-group mb-2")
        input(id="newProdGenre" type="text" class="form-control addNewProd" name="genre" placeholder="Add genre" aria-label="Add genre" aria-describedby="button-addon2")
      div( class="input-group mb-2")
        input(id="newProdPlatform" type="text" class="form-control addNewProd" name="platform" placeholder="Add platfroms" aria-label="Add platfroms" aria-describedby="button-addon2")
      div( class="input-group mb-2")
        input(id="newProdStock" type="number" class="form-control addNewProd" name="stock" placeholder="Add stock" aria-label="Add stock" aria-describedby="button-addon2")
      div( class="input-group")            
        button(class="btn btn-success w-100 mr-0" id="submit" type="submit") Submit
  .container
    div(id="notice" style="position: fixed; right: 0; z-index: 9999;")
    div(class="mt-1 mt-xl-1 mt-lg-1 mt-md-1 mt-sm-1table-responsive" id="adminPanel")
      div(class="card mb-1")
        div( class="card-header")
          h6(class="m-0 p-2 float-left font-weight-bold ") Add new product
          div(class="float-right d-line")
            a(class="btn btn-warning mr-0" data-toggle="collapse" href="#addNewItem" role="button" aria-expanded="false" aria-controls="addNewItem")
              i(class="fas fa-plus-square")
        div(class="collapse" id="addNewItem")
          div(class="card-body p-3")
            +inputs('add')
      table(class="table table-dark" id="dataTable" width="100%" cellspacing="0")
        thead
          tr
            th(id="adminPositionItems" scope="col") #
            th(class="text-center adminPoster" scope="col") Poster
            th(scope="col") Name
            th(class="adminPrice" scope="col") Price
            th(class="adminStock" scope="col") Stock
            th(class="adminEdit" scope="col") Edit
            th(class="adminDelete" scope="col") Delete
        tbody
          each item, i in adminItems
            tr
              th(class="text-center align-middle" scope="row") #{i+1}
              td(class="text-center align-middle" scope="row")
                a(href=`/${item.title}`)
                  img(class="adminPoster align-middle" src= item.imagePoster)
              td(class="align-middle" scope="row")
                a(class="text-white" href=`/${item.title}`) #{item.title}
              td(class="adminPrice align-middle" scope="row") $ #{item.price}
              td(class="adminStock align-middle" scope="row") #{item.stock}
              td(class="adminEdit align-middle" scope="row")
                a(class="btn btn-light editProduct" data-toggle="collapse" href=`#editProduct-${i+1}` role="button" aria-expanded="false" aria-controls="editProduct")              
                  <i href="#" class="fas fa-pencil-alt "></i>
              td(class="adminDelete align-middle" scope="row")
                form(action="/admin" method="POST")
                  input(type="hidden" name='id' value= item._id)
                  input(type="hidden" name='action' value='delete')
                  button(class="btn btn-danger" href=`/admin`)
                    <i class="fas fa-trash-alt"></i>
            tr(class="editProductPanel")
              td(colspan="8")
                div(class="collapse" id= `editProduct-${i+1}`)
                  div(class="card-body p-1")
                    +inputs('edit')